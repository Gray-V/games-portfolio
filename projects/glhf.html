<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GLHF Language Analyzer - Grayson von Goetz</title>
  <link rel="stylesheet" href="../assets/css/styles.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    pre {
      background: #f4f4f4;
      padding: 1rem;
      overflow-x: auto;
      border-left: 4px solid #6aaed6;
      font-family: Consolas, monospace;
      font-size: 0.95rem;
      border-radius: 0.5rem;
    }
    code {
      white-space: pre-wrap;
    }
  </style>
</head>
<body>
  <!-- Header will be loaded here -->
  <div id="header-placeholder"></div>

  <!-- Project Header -->
  <section class="project-header">
    <div class="container">
      <h1 class="project-title">GLHF Language Analyzer</h1>
      <p class="project-subtitle">A static semantic analyzer for a custom scripting language with complete test coverage and expressive error messaging</p>
    </div>
  </section>

  <main>
    <div class="container">
      <!-- Project Overview -->
      <section class="section">
        <h2 class="section-title">Project Summary</h2>
        <div class="content-card">
          <p>This analyzer is part of a custom programming language pipeline ("GLHF"), responsible for static semantic checks. It processes abstract syntax trees and enforces correctness rules such as type checking, scope validation, and control flow constraints.</p>
          <ul class="features-list">
            <li><strong>Custom Context System</strong> for lexical scoping and loop tracking</li>
            <li><strong>Type-safe expression analysis</strong> including numeric, boolean, and array operations</li>
            <li><strong>Clear developer feedback</strong> through location-specific error messages</li>
            <li><strong>100% test-driven</strong> development with robust semantic coverage</li>
          </ul>
        </div>
      </section>

      <!-- Code Sample -->
      <section class="section">
        <h2 class="section-title">Code Sample: Semantic Analyzer</h2>
        <div class="content-card">
          <pre><code>function mustBothHaveTheSameType(e1, e2, at) {
  must(e1.type === e2.type, "Operands must have the same type", at);
}

function mustHaveBooleanType(e, at) {
  must(e.type === BOOLEAN, "Expected a boolean", at);
}

Exp1_binary(exp, _ops, exps) {
  let left = exp.rep();
  mustHaveBooleanType(left, { at: exp });
  for (let e of exps.children) {
    let right = e.rep();
    mustHaveBooleanType(right, { at: e });
    left = core.binary("||", left, right, BOOLEAN);
  }
  return left;
}
</code></pre>
          <p>This example shows type enforcement and binary operator construction for boolean expressions.</p>
        </div>
      </section>

      <!-- Test Code Sample -->
      <section class="section">
        <h2 class="section-title">Test Suite Excerpt</h2>
        <div class="content-card">
          <pre><code>const semanticErrors = [
  ['must have the same type', 'x = 1 + 1.0', /Operands must have the same type/],
  ['undeclared variable', 'x = x + 5', /Gamer! You forgot to identify your variable/]
]

describe('The analyzer', () => {
  for (const [scenario, source, errorMessagePattern] of semanticErrors) {
    it(`throws on ${scenario}`, () => {
      assert.throws(() => analyze(parser(source)), errorMessagePattern)
    })
  }
})
</code></pre>
          <p>Each test case parses input code, runs the analyzer, and verifies that the correct semantic error is thrown when appropriate.</p>
        </div>
      </section>

      <!-- Coverage Report -->
      <section class="section">
        <h2 class="section-title">Coverage Snapshot</h2>
        <div class="content-card">
          <ul class="features-list">
            <li><strong>analyzer.js</strong> – 100% statement and branch coverage</li>
            <li><strong>Test suite</strong> – 40+ semantic cases covered</li>
            <li><strong>Error edge cases</strong> tested using regular expressions for precise messaging</li>
          </ul>
          <p>Coverage tracked using <code>c8</code> and <code>nyc</code>, with HTML report output available in <code>coverage/lcov-report/</code>.</p>
        </div>
      </section>

      <!-- Navigation -->
      <a href="../index.html" class="back-link">Back to Projects</a>
    </div>
  </main>

  <footer>
    <div class="container"></div>
  </footer>

  <script>
    // Load header
    fetch('../components/header.html')
      .then(response => response.text())
      .then(data => {
        document.getElementById('header-placeholder').innerHTML = data;
        document.getElementById('current-page').textContent = 'GLHF Language Analyzer';
      })
      .catch(error => console.log('Header loading failed:', error));
  </script>
</body>
</html>